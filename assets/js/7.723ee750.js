(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{200:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"fixture-client-for-php-http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fixture-client-for-php-http","aria-hidden":"true"}},[t._v("#")]),t._v(" Fixture client for PHP-HTTP")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://packagist.org/packages/swisnl/php-http-fixture-client",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/packagist/php-v/swisnl/php-http-fixture-client.svg",alt:"PHP from Packagist"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://packagist.org/packages/swisnl/php-http-fixture-client",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/packagist/v/swisnl/php-http-fixture-client.svg",alt:"Latest Version on Packagist"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://github.com/swisnl/php-http-fixture-client/blob/master/LICENSE",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/packagist/l/swisnl/php-http-fixture-client.svg",alt:"Software License"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://travis-ci.org/swisnl/php-http-fixture-client",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://travis-ci.org/swisnl/php-http-fixture-client.svg?branch=master",alt:"Build Status"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://scrutinizer-ci.com/g/swisnl/php-http-fixture-client/?branch=master",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/scrutinizer/coverage/g/swisnl/php-http-fixture-client.svg",alt:"Scrutinizer Coverage"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://scrutinizer-ci.com/g/swisnl/php-http-fixture-client/?branch=master",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/scrutinizer/g/swisnl/php-http-fixture-client.svg",alt:"Scrutinizer Code Quality"}}),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://www.swis.nl",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/badge/%F0%9F%9A%80-made%20by%20SWIS-%23D9021B.svg",alt:"Made by SWIS"}}),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("This is a fixture client for PHP-HTTP and is meant for testing purposes.\nIt maps requests to static fixtures.")]),t._v(" "),s("h2",{attrs:{id:"install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install","aria-hidden":"true"}},[t._v("#")]),t._v(" Install")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ composer require --dev swisnl/php-http-fixture-client\n")])])]),s("h2",{attrs:{id:"usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create client")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$responseBuilder")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Swis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fixture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ResponseBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'/path/to/fixtures'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$client")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Swis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Fixture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$responseBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Send request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$client")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"fixture-mapping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fixture-mapping","aria-hidden":"true"}},[t._v("#")]),t._v(" Fixture mapping")]),t._v(" "),s("p",[t._v("All requests send using this client are mapped to static fixtures located in the provided path.\nURLs are transformed to file paths by using the domain and path fragments and (optionally) the method and/or the query params (sorted alphabetically).\nA list of possible fixture paths is made and handled in order of specificity:")]),t._v(" "),s("ol",[s("li",[t._v("{path}.{query}.{method}.mock")]),t._v(" "),s("li",[t._v("{path}.{query}.mock")]),t._v(" "),s("li",[t._v("{path}.{method}.mock")]),t._v(" "),s("li",[t._v("{path}.mock")])]),t._v(" "),s("p",[t._v("Please see the following table for some examples.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("URL")]),t._v(" "),s("th",[t._v("Method")]),t._v(" "),s("th",[t._v("Possible fixtures (in order of specificity)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("http://example.com/api/articles/1")]),t._v(" "),s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/articles/1.get.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/articles/1.mock")])]),t._v(" "),s("tr",[s("td",[t._v("http://example.com/api/articles")]),t._v(" "),s("td",[t._v("POST")]),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/articles.post.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/articles.mock")])]),t._v(" "),s("tr",[s("td",[t._v("http://example.com/api/comments?query=json")]),t._v(" "),s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.query=json.get.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.query=json.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.get.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.mock")])]),t._v(" "),s("tr",[s("td",[t._v("http://example.com/api/comments?query=json&order=id")]),t._v(" "),s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.order=id&query=json.get.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.order=id&query=json.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.get.mock")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("/path/to/fixtures/example.com/api/comments.mock")])])])]),t._v(" "),s("h3",{attrs:{id:"strict-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strict-mode","aria-hidden":"true"}},[t._v("#")]),t._v(" Strict mode")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("ReponseBuilder")]),t._v(" can be set to strict mode using "),s("code",[t._v("setStrictMode(true)")]),t._v(".\nWhen in strict mode, only the first possible fixture path will be used.\nThis means that both the method and query params must be present in the fixture file name and it does not fall back to other fixture files.")]),t._v(" "),s("h3",{attrs:{id:"helper"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helper","aria-hidden":"true"}},[t._v("#")]),t._v(" Helper")]),t._v(" "),s("UrlHelper",[t._v("Please see "),s("a",{attrs:{href:"https://swisnl.github.io/php-http-fixture-client/#helper"}},[t._v("https://swisnl.github.io/php-http-fixture-client/#helper")]),t._v(" for the URL helper.")]),t._v(" "),s("h3",{attrs:{id:"body"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#body","aria-hidden":"true"}},[t._v("#")]),t._v(" Body")]),t._v(" "),s("p",[t._v("The body of a request is loaded directly from a fixture with the file extension "),s("em",[t._v(".mock")]),t._v(".\nThe contents of this file can be anything that is a valid HTTP response, e.g. HTML, JSON or even images.\nIf a fixture can not be found, a "),s("code",[t._v("MockNotFoundException")]),t._v(" will be thrown.\nThis exception has a convenience method "),s("code",[t._v("getPossiblePaths()")]),t._v(" which lists all file paths that were checked, in order of specificity.")]),t._v(" "),s("h3",{attrs:{id:"headers-optional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#headers-optional","aria-hidden":"true"}},[t._v("#")]),t._v(" Headers (optional)")]),t._v(" "),s("p",[t._v("The headers of a request are loaded from a fixture with the file extension "),s("em",[t._v(".headers")]),t._v(".\nThis is a simple JSON object with headers, e.g.")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"X-Made-With"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PHPUnit"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"status-optional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#status-optional","aria-hidden":"true"}},[t._v("#")]),t._v(" Status (optional)")]),t._v(" "),s("p",[t._v("The status code of a request is loaded from a fixture with the file extension "),s("em",[t._v(".status")]),t._v(".\nThis is a plain file containing only the "),s("a",{attrs:{href:"https://httpstatuses.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP status code"),s("OutboundLink")],1),t._v(".\nIf no "),s("em",[t._v(".status")]),t._v(" file is found, "),s("em",[t._v("200 OK")]),t._v(" will be used.")]),t._v(" "),s("h2",{attrs:{id:"mocks-advanced"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mocks-advanced","aria-hidden":"true"}},[t._v("#")]),t._v(" Mocks (advanced)")]),t._v(" "),s("p",[t._v("This client extends "),s("a",{attrs:{href:"https://github.com/php-http/mock-client",target:"_blank",rel:"noopener noreferrer"}},[t._v("php-http/mock-client"),s("OutboundLink")],1),t._v(", which allows you to add custom responses and exceptions that ignore fixture files. Please see the "),s("a",{attrs:{href:"https://github.com/php-http/mock-client#documentation",target:"_blank",rel:"noopener noreferrer"}},[t._v("mock-client documentation"),s("OutboundLink")],1),t._v(" for more information.")]),t._v(" "),s("p",[t._v("N.B. A default response can not be set because this client uses that under the hood.")]),t._v(" "),s("h2",{attrs:{id:"change-log"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#change-log","aria-hidden":"true"}},[t._v("#")]),t._v(" Change log")]),t._v(" "),s("p",[t._v("Please see "),s("a",{attrs:{href:"https://github.com/swisnl/php-http-fixture-client/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CHANGELOG"),s("OutboundLink")],1),t._v(" for more information on what has changed recently.")]),t._v(" "),s("h2",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing","aria-hidden":"true"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ composer "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),t._v("\n")])])]),s("h2",{attrs:{id:"contributing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contributing","aria-hidden":"true"}},[t._v("#")]),t._v(" Contributing")]),t._v(" "),s("p",[t._v("Please see "),s("a",{attrs:{href:"https://github.com/swisnl/php-http-fixture-client/blob/master/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CONTRIBUTING"),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://github.com/swisnl/php-http-fixture-client/blob/master/CODE_OF_CONDUCT.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CODE_OF_CONDUCT"),s("OutboundLink")],1),t._v(" for details.")]),t._v(" "),s("h2",{attrs:{id:"security"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security","aria-hidden":"true"}},[t._v("#")]),t._v(" Security")]),t._v(" "),s("p",[t._v("If you discover any security related issues, please email security@swis.nl instead of using the issue tracker.")]),t._v(" "),s("h2",{attrs:{id:"license"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#license","aria-hidden":"true"}},[t._v("#")]),t._v(" License")]),t._v(" "),s("p",[t._v("The MIT License (MIT). Please see "),s("a",{attrs:{href:"https://github.com/swisnl/php-http-fixture-client/blob/master/LICENSE.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("License File"),s("OutboundLink")],1),t._v(" for more information.")]),t._v(" "),s("h2",{attrs:{id:"swis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swis","aria-hidden":"true"}},[t._v("#")]),t._v(" SWIS")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.swis.nl",target:"_blank",rel:"noopener noreferrer"}},[t._v("SWIS"),s("OutboundLink")],1),t._v(" is a web agency from Leiden, the Netherlands. We love working with open source software.")])],1)},[],!1,null,null,null);e.default=r.exports}}]);