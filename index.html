<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fixture client for PHP-HTTP | swisnl/php-http-fixture-client</title>
    <meta name="description" content="Fixture client for PHP-HTTP">
    
    
    <link rel="preload" href="/php-http-fixture-client/assets/css/styles.d54aa125.css" as="style"><link rel="preload" href="/php-http-fixture-client/assets/js/app.d54aa125.js" as="script"><link rel="preload" href="/php-http-fixture-client/assets/js/4.bb0b2c54.js" as="script"><link rel="preload" href="/php-http-fixture-client/assets/css/3.styles.cd65e5d7.css" as="style"><link rel="preload" href="/php-http-fixture-client/assets/js/3.cd65e5d7.js" as="script"><link rel="prefetch" href="/php-http-fixture-client/assets/css/1.styles.737bf7c1.css"><link rel="prefetch" href="/php-http-fixture-client/assets/js/1.737bf7c1.js"><link rel="prefetch" href="/php-http-fixture-client/assets/css/2.styles.e125df83.css"><link rel="prefetch" href="/php-http-fixture-client/assets/js/2.e125df83.js">
    <link rel="stylesheet" href="/php-http-fixture-client/assets/css/styles.d54aa125.css"><link rel="stylesheet" href="/php-http-fixture-client/assets/css/1.styles.737bf7c1.css"><link rel="stylesheet" href="/php-http-fixture-client/assets/css/2.styles.e125df83.css"><link rel="stylesheet" href="/php-http-fixture-client/assets/css/3.styles.cd65e5d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/php-http-fixture-client/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">swisnl/php-http-fixture-client</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/swisnl/php-http-fixture-client" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/swisnl/php-http-fixture-client" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </div> <div class="page"> <div class="content"><h1 id="fixture-client-for-php-http"><a href="#fixture-client-for-php-http" aria-hidden="true" class="header-anchor">#</a> Fixture client for PHP-HTTP</h1> <p><a href="https://packagist.org/packages/swisnl/php-http-fixture-client" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/packagist/php-v/swisnl/php-http-fixture-client.svg" alt="PHP from Packagist"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://packagist.org/packages/swisnl/php-http-fixture-client" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/packagist/v/swisnl/php-http-fixture-client.svg" alt="Latest Version on Packagist"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/swisnl/php-http-fixture-client/blob/master/LICENSE" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/packagist/l/swisnl/php-http-fixture-client.svg" alt="Software License"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://app.shippable.com/github/swisnl/php-http-fixture-client" target="_blank" rel="noopener noreferrer"><img src="https://api.shippable.com/projects/5a7d7deb260fde0600abe59e/badge?branch=master" alt="Run Status"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://app.shippable.com/github/swisnl/php-http-fixture-client" target="_blank" rel="noopener noreferrer"><img src="https://api.shippable.com/projects/5a7d7deb260fde0600abe59e/coverageBadge?branch=master" alt="Coverage Badge"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.swis.nl" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/%F0%9F%9A%80-made%20by%20SWIS-%23D9021B.svg" alt="Made by SWIS"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>This is a fixture client for PHP-HTTP and is meant for testing purposes.
It maps requests to static fixtures.</p> <h2 id="install"><a href="#install" aria-hidden="true" class="header-anchor">#</a> Install</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ composer require --dev swisnl/php-http-fixture-client
</code></pre></div><h2 id="usage"><a href="#usage" aria-hidden="true" class="header-anchor">#</a> Usage</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Create client</span>
<span class="token variable">$responseBuilder</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token punctuation">\</span>Swis<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Fixture<span class="token punctuation">\</span>ResponseBuilder</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/fixtures'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token punctuation">\</span>Swis<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Fixture<span class="token punctuation">\</span>Client</span><span class="token punctuation">(</span><span class="token variable">$responseBuilder</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Send request</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="fixture-mapping"><a href="#fixture-mapping" aria-hidden="true" class="header-anchor">#</a> Fixture mapping</h2> <p>All requests send using this client are mapped to static fixtures located in the provided path.
URLs are transformed to file paths by using the domain and path fragments and (optionally) the method and/or the query params (sorted alphabetically).
A list of possible fixture paths is made and handled in order of specificity:</p> <ol><li>{path}.{query}.{method}.mock</li> <li>{path}.{query}.mock</li> <li>{path}.{method}.mock</li> <li>{path}.mock</li></ol> <p>Please see the following table for some examples.</p> <table><thead><tr><th>URL</th> <th>Method</th> <th>Possible fixtures (in order of specificity)</th></tr></thead> <tbody><tr><td>http://example.com/api/articles/1</td> <td>GET</td> <td>/path/to/fixtures/example.com/api/articles/1.get.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/articles/1.mock</td></tr> <tr><td>http://example.com/api/articles</td> <td>POST</td> <td>/path/to/fixtures/example.com/api/articles.post.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/articles.mock</td></tr> <tr><td>http://example.com/api/comments?query=json</td> <td>GET</td> <td>/path/to/fixtures/example.com/api/comments.query=json.get.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/comments.query=json.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/comments.get.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/comments.mock</td></tr> <tr><td>http://example.com/api/comments?query=json&amp;order=id</td> <td>GET</td> <td>/path/to/fixtures/example.com/api/comments.order=id&amp;query=json.get.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/comments.order=id&amp;query=json.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/comments.get.mock</td></tr> <tr><td></td> <td></td> <td>/path/to/fixtures/example.com/api/comments.mock</td></tr></tbody></table> <h3 id="helper"><a href="#helper" aria-hidden="true" class="header-anchor">#</a> Helper</h3> <div data-v-4a775321><p data-v-4a775321>Use this helper to generate the possible fixtures for your own URL.</p> <h4 data-v-4a775321><label for="url" data-v-4a775321>URL</label></h4> <input type="text" id="url" placeholder="http://example.com/api/comments?query=json&order=id" value="" class="input" data-v-4a775321> <h4 data-v-4a775321><label for="method" data-v-4a775321>Method</label></h4> <select id="method" class="select" data-v-4a775321><option value="get" selected="selected" data-v-4a775321>GET</option> <option value="head" data-v-4a775321>HEAD</option> <option value="post" data-v-4a775321>POST</option> <option value="put" data-v-4a775321>PUT</option> <option value="delete" data-v-4a775321>DELETE</option> <option value="connect" data-v-4a775321>CONNECT</option> <option value="options" data-v-4a775321>OPTIONS</option> <option value="trace" data-v-4a775321>TRACE</option> <option value="patch" data-v-4a775321>PATCH</option></select> <h4 data-v-4a775321>Possible fixtures (in order of specificity)</h4> <p data-v-4a775321>Please insert a valid URL!</p></div> <h3 id="body"><a href="#body" aria-hidden="true" class="header-anchor">#</a> Body</h3> <p>The body of a request is loaded directly from a fixture with the file extension <em>.mock</em>.
The contents of this file can be anything that is a valid HTTP response, e.g. HTML, JSON or even images.
If a fixture can not be found, a <code>MockNotFoundException</code> will be thrown.
This exception has a convenience method <code>getPossiblePaths()</code> which lists all file paths that were checked, in order of specificity.</p> <h3 id="headers-optional"><a href="#headers-optional" aria-hidden="true" class="header-anchor">#</a> Headers (optional)</h3> <p>The headers of a request are loaded from a fixture with the file extension <em>.headers</em>.
This is a simple JSON object with headers, e.g.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;X-Made-With&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PHPUnit&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="status-optional"><a href="#status-optional" aria-hidden="true" class="header-anchor">#</a> Status (optional)</h3> <p>The status code of a request is loaded from a fixture with the file extension <em>.status</em>.
This is a plain file containing only the <a href="https://httpstatuses.com/" target="_blank" rel="noopener noreferrer">HTTP status code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
If no <em>.status</em> file is found, <em>200 OK</em> will be used.</p> <h2 id="change-log"><a href="#change-log" aria-hidden="true" class="header-anchor">#</a> Change log</h2> <p>Please see <a href="https://github.com/swisnl/php-http-fixture-client/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">CHANGELOG<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information on what has changed recently.</p> <h2 id="testing"><a href="#testing" aria-hidden="true" class="header-anchor">#</a> Testing</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ composer <span class="token function">test</span>
</code></pre></div><h2 id="contributing"><a href="#contributing" aria-hidden="true" class="header-anchor">#</a> Contributing</h2> <p>Please see <a href="https://github.com/swisnl/php-http-fixture-client/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">CONTRIBUTING<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://github.com/swisnl/php-http-fixture-client/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer">CODE_OF_CONDUCT<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for details.</p> <h2 id="security"><a href="#security" aria-hidden="true" class="header-anchor">#</a> Security</h2> <p>If you discover any security related issues, please email security@swis.nl instead of using the issue tracker.</p> <h2 id="license"><a href="#license" aria-hidden="true" class="header-anchor">#</a> License</h2> <p>The MIT License (MIT). Please see <a href="https://github.com/swisnl/php-http-fixture-client/blob/master/LICENSE.md" target="_blank" rel="noopener noreferrer">License File<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information.</p> <h2 id="swis"><a href="#swis" aria-hidden="true" class="header-anchor">#</a> SWIS</h2> <p><a href="https://www.swis.nl" target="_blank" rel="noopener noreferrer">SWIS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a web agency from Leiden, the Netherlands. We love working with open source software.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/swisnl/php-http-fixture-client/edit/master/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <!----> </div> <!----></div></div>
    <script src="/php-http-fixture-client/assets/js/4.bb0b2c54.js" defer></script><script src="/php-http-fixture-client/assets/js/3.cd65e5d7.js" defer></script><script src="/php-http-fixture-client/assets/js/app.d54aa125.js" defer></script>
  </body>
</html>
